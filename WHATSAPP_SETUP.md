# WhatsApp订单功能使用说明

## 功能概述

本应用已集成WhatsApp订单发送功能，客户可以直接通过WhatsApp发送订单信息。

## 功能特点

1. **购物车下单** - 在购物车中汇总所有商品后发送订单
2. **快速下单** - 在商品详情页直接发送单个商品订单
3. **订单格式化** - 自动格式化订单信息，包含商品详情、价格、数量等

## 配置WhatsApp号码

### 方法1：环境变量（推荐）

创建 `.env` 文件（在项目根目录）：

```env
VITE_WHATSAPP_PHONE=8613800138000
```

**号码格式说明：**
- 格式：国家代码 + 号码（不含+号）
- 中国示例：`8613800138000`（86是国家代码，13800138000是号码）
- 美国示例：`11234567890`（1是国家代码）
- 其他：根据国家代码调整

### 方法2：直接修改代码

如果不想使用环境变量，可以直接修改以下文件中的号码：

1. `src/components/CartSidebar.vue` - 第47行
2. `src/views/ProductDetail.vue` - 第125行

将 `'8613800138000'` 替换为您的WhatsApp号码。

## 使用方法

### 1. 购物车下单

1. 点击导航栏的购物车图标
2. 在购物车侧边栏中查看商品
3. 可以调整商品数量或删除商品
4. 点击"发送订单到WhatsApp"按钮
5. 系统会自动打开WhatsApp并填充订单信息

### 2. 快速下单（单个商品）

1. 进入商品详情页
2. 点击"发送到WhatsApp下单"按钮（绿色按钮）
3. 系统会自动打开WhatsApp并发送该商品的订单信息

## 订单消息格式

发送到WhatsApp的订单消息包含以下信息：

```
🛍️ *新订单*
━━━━━━━━━━━━━━━━

📦 *订单详情*

1. 商品名称
   材质：18K白金
   主石：1.5克拉钻石
   尺寸：可定制
   单价：¥12,999
   数量：1
   小计：¥12,999

━━━━━━━━━━━━━━━━
💰 *订单总额：¥12,999*

📅 下单时间：2024/01/01 12:00

感谢您的订购！我们会尽快与您联系。
```

## 测试功能

### 测试步骤

1. **测试购物车下单：**
   - 添加多个商品到购物车
   - 打开购物车侧边栏
   - 点击"发送订单到WhatsApp"
   - 检查WhatsApp是否打开并显示正确的订单信息

2. **测试快速下单：**
   - 进入任意商品详情页
   - 点击"发送到WhatsApp下单"按钮
   - 检查WhatsApp是否打开并显示商品信息

3. **测试号码格式：**
   - 确保号码格式正确（国家代码+号码，不含+号）
   - 测试不同国家的号码格式

### 常见问题

**Q: WhatsApp没有打开？**
A: 检查号码格式是否正确，确保使用 `wa.me` URL格式。

**Q: 消息格式不正确？**
A: 检查 `src/utils/whatsapp.js` 中的 `formatOrderMessage` 函数。

**Q: 如何添加客户信息？**
A: 可以在 `CartSidebar.vue` 的 `handleCheckout` 函数中添加客户信息收集表单。

## 自定义订单消息

如需自定义订单消息格式，请修改 `src/utils/whatsapp.js` 文件中的 `formatOrderMessage` 函数。

## 注意事项

1. WhatsApp号码必须是有效的WhatsApp账号
2. 号码格式必须正确（国家代码+号码）
3. 在某些地区可能需要使用WhatsApp Web
4. 建议在移动设备上测试，体验最佳

## 技术支持

如有问题，请检查：
- 浏览器控制台是否有错误
- WhatsApp号码格式是否正确
- 网络连接是否正常

